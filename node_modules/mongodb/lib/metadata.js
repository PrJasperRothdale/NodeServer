<<<<<<< HEAD
=======
'use strict';

>>>>>>> f6b904bdc1d20351c7041f337cbd3c2d2780b6d4
var f = require('util').format;

var Define = function(name, object, stream) {
  this.name = name;
  this.object = object;
<<<<<<< HEAD
  this.stream = typeof stream == 'boolean' ? stream : false;
  this.instrumentations = {};
}
=======
  this.stream = typeof stream === 'boolean' ? stream : false;
  this.instrumentations = {};
};
>>>>>>> f6b904bdc1d20351c7041f337cbd3c2d2780b6d4

Define.prototype.classMethod = function(name, options) {
  var keys = Object.keys(options).sort();
  var key = generateKey(keys, options);

  // Add a list of instrumentations
<<<<<<< HEAD
  if(this.instrumentations[key] == null) {
    this.instrumentations[key] = {
      methods: [], options: options
    }
=======
  if (this.instrumentations[key] == null) {
    this.instrumentations[key] = {
      methods: [],
      options: options
    };
>>>>>>> f6b904bdc1d20351c7041f337cbd3c2d2780b6d4
  }

  // Push to list of method for this instrumentation
  this.instrumentations[key].methods.push(name);
<<<<<<< HEAD
}

var generateKey = function(keys, options) {
  var parts = [];
  for(var i = 0; i < keys.length; i++) {
=======
};

var generateKey = function(keys, options) {
  var parts = [];
  for (var i = 0; i < keys.length; i++) {
>>>>>>> f6b904bdc1d20351c7041f337cbd3c2d2780b6d4
    parts.push(f('%s=%s', keys[i], options[keys[i]]));
  }

  return parts.join();
<<<<<<< HEAD
}
=======
};
>>>>>>> f6b904bdc1d20351c7041f337cbd3c2d2780b6d4

Define.prototype.staticMethod = function(name, options) {
  options.static = true;
  var keys = Object.keys(options).sort();
  var key = generateKey(keys, options);

  // Add a list of instrumentations
<<<<<<< HEAD
  if(this.instrumentations[key] == null) {
    this.instrumentations[key] = {
      methods: [], options: options
    }
=======
  if (this.instrumentations[key] == null) {
    this.instrumentations[key] = {
      methods: [],
      options: options
    };
>>>>>>> f6b904bdc1d20351c7041f337cbd3c2d2780b6d4
  }

  // Push to list of method for this instrumentation
  this.instrumentations[key].methods.push(name);
<<<<<<< HEAD
}
=======
};
>>>>>>> f6b904bdc1d20351c7041f337cbd3c2d2780b6d4

Define.prototype.generate = function() {
  // Generate the return object
  var object = {
<<<<<<< HEAD
    name: this.name, obj: this.object, stream: this.stream,
    instrumentations: []
  }

  for(var name in this.instrumentations) {
=======
    name: this.name,
    obj: this.object,
    stream: this.stream,
    instrumentations: []
  };

  for (var name in this.instrumentations) {
>>>>>>> f6b904bdc1d20351c7041f337cbd3c2d2780b6d4
    object.instrumentations.push(this.instrumentations[name]);
  }

  return object;
<<<<<<< HEAD
}
=======
};
>>>>>>> f6b904bdc1d20351c7041f337cbd3c2d2780b6d4

module.exports = Define;
